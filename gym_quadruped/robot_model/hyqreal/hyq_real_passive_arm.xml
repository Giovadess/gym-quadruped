<mujoco model="hyq_passive_arm">
    <compiler angle="radian" meshdir="./assets/" autolimits="true"/>
    <option cone="elliptic" impratio="100" />
    <size njmax="500" nconmax="100" />
    <option gravity='0 0 -9.806' timestep='0.002'/>

    <default>
        <geom contype="1" conaffinity="1" friction="0.8 0.02 0.01" rgba="0.5 0.6 0.7 1" margin="0.001" group="0"/>

        <light castshadow="false" diffuse="1 1 1"/>
        <motor ctrlrange="-44.4 44.4" ctrllimited="true"/>
        <camera fovy="60"/>
        <joint damping="3" armature="0.01" frictionloss="0.2" />
        
        
    
    </default>
    <!-- No rename the assests these are the mesh files-->
    <asset>

        <mesh name="base_arm_link" file="HQR_1666_C4_Mount.stl" scale="0.001 0.001 0.001"/>
        <mesh name="arm_link_1" file="hyq_arm_link1.stl" scale="0.001 0.001 0.001" />
        <mesh name="arm_link_2" file="hyq_arm_link2.stl" scale="0.001 0.001 0.001" />
        <mesh name="arm_link_3" file="hyq_arm_link3.stl" scale="0.001 0.001 0.001" />
    </asset>



    <!-- <visual>
      <headlight diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3" specular="0 0 0"/>
      <rgba haze="0.15 0.25 0.35 1"/>
      <global azimuth="-130" elevation="-20"/>
    </visual> -->
    <default>
        <geom contype="1" conaffinity="1" friction="0.8 0.02 0.01" rgba="0.5 0.6 0.7 1" margin="0.001" group="0"/>

        <light castshadow="false" diffuse="1 1 1"/>
        <camera fovy="60"/>
        <!-- <joint damping="50" armature="0.01" frictionloss="0.1" /> -->


        <default class="visual_arm">
            <geom type="mesh" contype="0" conaffinity="0" group="4"/>
        </default>
        <default class="collision_arm">
            <geom group="5"/>
        </default> 

    </default>
    <asset>
      <texture type="skybox" builtin="gradient" rgb1="0.3 0.5 0.7" rgb2="0 0 0" width="512" height="3072"/>
      <texture type="2d" name="groundplane" builtin="checker" mark="edge" rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3"
        markrgb="0.8 0.8 0.8" width="300" height="300"/>
      <material name="groundplane" texture="groundplane" texuniform="true" texrepeat="5 5" reflectance="0.2"/>
    </asset>
    <!-- pos is used to set the position-->
    <worldbody>
        <light directional="true" diffuse=".8 .8 .8" pos="0 0 10" dir="0 0 -10"/>
        <camera pos="1.794 0.068 0.397" mode="trackcom" xyaxes="0.008 1.000 0.000 -0.155 0.001 0.988"/>
        <camera name="follower/track" mode="trackcom" pos="0 -1.3 1.6" xyaxes="1 0 0 0 0.707 0.707"/>

            <body name="arm_base" pos="0. 0 0.056" >

                    <inertial pos="0. 0.0 0.0" quat="0 0 0 1" mass="0.02" diaginertia="0.000004622 0.000004495 0.000002079" /> 

                    <geom class="visual_arm" quat="-1 0 0 0" type="mesh" rgba="0.3 0.3 0.3 1" mesh="base_arm_link"/>
                    <geom class="collision_arm" quat="-1 0 0 0" type="mesh" rgba="0.3 0.3 0.3 1" mesh="base_arm_link"/>
                    <!-- <geom quat="-1 0 0 0" type="mesh" contype="0" conaffinity="0" group="2" rgba="0.2 0.2 0.2 1" mesh="base_arm_link" />
                    <geom size="0.0046 0.00209" pos="0 0 0" quat="0.707107 0.707107 0 0" type="capsule" rgba="0.2 0.2 0.2 0" /> -->

                    <body name="arm_link_0" pos="-0.385 0.04 0.06" quat="0.5 0 0 -0.5">
                        <inertial pos="0. 0 0." quat="1 0 0 0" mass="0.05" diaginertia="0.000004622 0.000004495 0.000002079" />
                        <joint name="arm_link_1_joint" pos="0. -0.075 0." axis="0 0 1" limited="true" range="-22 22"  stiffness="100"
                        damping="10" /> <!-- Joint 1 limit is btwn -22 and 22-->

                        <geom class="visual_arm" quat="0 0 0 1" type="mesh" rgba="0.3 0.3 0.3 1" mesh="arm_link_1"/>
                        <geom class="collision_arm" quat="0 0 0 1" type="mesh" rgba="0.3 0.3 0.3 1" mesh="arm_link_1"/>

                        <!-- <geom quat=" 0 0 0 1" type="mesh" contype="0" conaffinity="0" group="2" rgba="0.2 0.2 0.2 1" mesh="arm_link_1" />
                        <geom size="0.04 0.0002 0.1" pos="0. 0 0" quat="0 0 0 1" type="capsule" rgba="0.2 0.2 0.2 0" /> -->
                        
                        <body name="follower/arm_link_1" pos="0.094 -0.007 -0.05 " quat="1 0. -0.2 0">
                            <inertial pos="0.0194 0.0 -0.125" quat="0 0 0 1" mass="0.05" diaginertia="0.00000457 0.000004831 0.000001409" />
                             <!-- Joint 2 limit is btwn -30 and 30, arm rest flat at 180deg with link1 when load is applied-->
                            <joint name="arm_link_2_joint" pos="0.2 -0.007 0.1 " axis="0 1 0" limited="true" range="-30 30" stiffness="100"
                            damping="10" />

                            <geom class="visual_arm" quat="0 0 0 1" type="mesh" rgba="0.3 0.3 0.3 1" mesh="arm_link_2"/>
                            <geom class="collision_arm" quat="0 0 0 1" type="mesh" rgba="0.3 0.3 0.3 1" mesh="arm_link_2"/>

                            <body name="arm_link_2" pos="-0.675 0.006 -0.265" quat="1 0. 0 0">
                                <inertial pos="0.0388 0.0 -0.25" quat="1 0 0 0" mass="0.0220" diaginertia="0.000011088 0.00001072 0.000011255" />
                                 <!-- Joint 3 limit is btwn -50 and 16(towards robot so down)-->
                                <joint name="arm_link_3_joint" pos="0.95 0.006 0.4" axis="0 1 0" limited="true" range="-50 16" stiffness="100"
                                damping="10" />

                                <geom class="visual_arm" quat="0 0 0 1" type="mesh" rgba="0.3 0.3 0.3 1" mesh="arm_link_3"/>
                                <geom class="collision_arm" quat="0 0 0 1" type="mesh" rgba="0.3 0.3 0.3 1" mesh="arm_link_3"/>


                                <body name="eef" pos="0.95 -0.07 0.125" quat="1 1 -0. 0">
                                    <inertial pos="0 0 0" mass="40" diaginertia="0.00001 0.00001 0.00001"/>
                                    <geom name="eef_geom" type="cylinder" size="0.01 0.15 0.1" rgba="0 1 0 1" contype="0" conaffinity="0"/>
                                    <site name="eef_contact" pos="0 0 0" size="0.01" rgba="1 0 0 1"/>
                                </body>
                            </body>
                        </body> 
                    </body>
            </body>


        <!-- </body> -->

        <!-- add a box mounting point -->
        <!-- <body name="mountpoint" pos="-2.5 0 0.1">
            <geom type="box" size="0.1 0.1 0.1" rgba="0.8 0.8 0.8 1"/>
            <site name="mount_pooint" pos="0 0 0" size="0.01" rgba="1 0 0 1"/>
        </body> -->



    </worldbody>
    <!-- <contact>
        <pair geom1="second/arm_link_2_link" geom2="massgeom"/>
    </contact> -->

    <!-- <tendon>
        <spatial name="link_arms" limited="false" range="0 0.8" width="0.005" stiffness="10" >
          <site site="eef_contact_leader"/>
          <site site="mount_pooint"/>
        </spatial>
    </tendon> -->

    <!-- <body name="box_link" >
        <geom type="box" size="0.1 0.1 0.1" rgba="0.8 0.8 0.8 1"/>
    </body> -->

    <!-- <equality>
      <connect anchor="-1.5 0 0" body1="arm_link_2" body2="second/arm_link_2" />
    </equality> -->
    
    <!-- <equality>
        <weld body1="second/arm_link_2" body2="mountpoint" relpose="0.1 0 -0.25 1 0 0 0" />
    </equality> -->
    <actuator>       

        <!-- second robot-->



        <!-- <motor name="second/arm_link_3_joint_sensorcad"      gear="1" joint="second/arm_link_3_joint"/> -->
    </actuator>

    <sensor>
<!-- 
        <jointpos name="FR_hip_pos"     joint="FR_hip_joint"/>
        <jointpos name="FR_thigh_pos"   joint="FR_thigh_joint"/>
        <jointpos name="FR_calf_pos"    joint="FR_calf_joint"/>
        <jointpos name="FL_hip_pos"     joint="FL_hip_joint"/>
        <jointpos name="FL_thigh_pos"   joint="FL_thigh_joint"/>
        <jointpos name="FL_calf_pos"    joint="FL_calf_joint"/>
        <jointpos name="RR_hip_pos"     joint="RR_hip_joint"/>
        <jointpos name="RR_thigh_pos"   joint="RR_thigh_joint"/>
        <jointpos name="RR_calf_pos"    joint="RR_calf_joint" />
        <jointpos name="RL_hip_pos"     joint="RL_hip_joint"/>
        <jointpos name="RL_thigh_pos"   joint="RL_thigh_joint"/>
        <jointpos name="RL_calf_pos"    joint="RL_calf_joint"/>
        <jointvel name="FR_hip_vel"     joint="FR_hip_joint"/>
        <jointvel name="FR_thigh_vel"   joint="FR_thigh_joint"/>
        <jointvel name="FR_calf_vel"    joint="FR_calf_joint"/>
        <jointvel name="FL_hip_vel"     joint="FL_hip_joint"/>
        <jointvel name="FL_thigh_vel"   joint="FL_thigh_joint"/>
        <jointvel name="FL_calf_vel"    joint="FL_calf_joint"/>
        <jointvel name="RR_hip_vel"     joint="RR_hip_joint"/>
        <jointvel name="RR_thigh_vel"   joint="RR_thigh_joint"/>
        <jointvel name="RR_calf_vel"    joint="RR_calf_joint" />
        <jointvel name="RL_hip_vel"     joint="RL_hip_joint"/>
        <jointvel name="RL_thigh_vel"   joint="RL_thigh_joint"/>
        <jointvel name="RL_calf_vel"    joint="RL_calf_joint"/>
        second robot sensors
        <jointpos name="second/FR_hip_pos"     joint="second/FR_hip_joint"/>
        <jointpos name="second/FR_thigh_pos"   joint="second/FR_thigh_joint"/>
        <jointpos name="second/FR_calf_pos"    joint="second/FR_calf_joint"/>
        <jointpos name="second/FL_hip_pos"     joint="second/FL_hip_joint"/>
        <jointpos name="second/FL_thigh_pos"   joint="second/FL_thigh_joint"/>
        <jointpos name="second/FL_calf_pos"    joint="second/FL_calf_joint"/>
        <jointpos name="second/RR_hip_pos"     joint="second/RR_hip_joint"/>
        <jointpos name="second/RR_thigh_pos"   joint="second/RR_thigh_joint"/>
        <jointpos name="second/RR_calf_pos"    joint="second/RR_calf_joint" />
        <jointpos name="second/RL_hip_pos"     joint="second/RL_hip_joint"/>
        <jointpos name="second/RL_thigh_pos"   joint="second/RL_thigh_joint"/>
        <jointpos name="second/RL_calf_pos"    joint="second/RL_calf_joint"/>
        <jointvel name="second/FR_hip_vel"     joint="second/FR_hip_joint"/>
        <jointvel name="second/FR_thigh_vel"   joint="second/FR_thigh_joint"/>
        <jointvel name="second/FR_calf_vel"    joint="second/FR_calf_joint"/>
        <jointvel name="second/FL_hip_vel"     joint="second/FL_hip_joint"/>
        <jointvel name="second/FL_thigh_vel"   joint="second/FL_thigh_joint"/>
        <jointvel name="second/FL_calf_vel"    joint="second/FL_calf_joint"/>
        <jointvel name="second/RR_hip_vel"     joint="second/RR_hip_joint"/>
        <jointvel name="second/RR_thigh_vel"   joint="second/RR_thigh_joint"/>
        <jointvel name="second/RR_calf_vel"    joint="second/RR_calf_joint" />
        <jointvel name="second/RL_hip_vel"     joint="second/RL_hip_joint"/>
        <jointvel name="second/RL_thigh_vel"   joint="second/RL_thigh_joint"/>
        <jointvel name="second/RL_calf_vel"    joint="second/RL_calf_joint"/>


        <jointpos name="arm_link_1_joint_pos" joint="arm_link_1_joint"/>
        <jointpos name="arm_link_2_joint_pos" joint="arm_link_2_joint"/>
        <jointpos name="arm_link_3_joint_pos" joint="arm_link_3_joint"/>


        <accelerometer name="Body_Acc" site="imu"/>

        <gyro name="Body_Gyro" site="imu"/> -->

        <!-- <tendonlimitfrc tendon="link_arms"/> -->
        <!-- <force name="force_sens_eef_1" site="eef_leader"/> -->
   

<!-- 
        <force name="tension_robot_body" site="imu"/>
        <torque name="torque_robot_body" site="imu"/> -->
        <!-- <velocimeter name="vel_eef" site="end2"/>
        <accelerometer name="accc_eef" site="end2"/> -->
<!-- 
        <framepos name="Body_Pos" objtype="site" objname="imu"/>

        <framequat name="Body_Quat" objtype="site" objname="imu"/>

        <accelerometer name="second/Body_Acc" site="second/imu"/>

        <gyro name="second/Body_Gyro" site="second/imu"/>

        <framepos name="second/Body_Pos" objtype="site" objname="second/imu"/>

        <framequat name="second/Body_Quat" objtype="site" objname="second/imu"/> -->
    </sensor>

    <!--this defines the initial position of the robot-->
    <!-- <keyframe>
        <key name="leader_home" qpos="-1.4 0 0.35 1 0 0 0 0 0.9 -1.8 0 0.9 -1.8 0 0.9 -1.8 0 0.9 -1.8 0 0 0. 0.8
                               
                             "
        ctrl="0 0.9 -1.8 0 0.9 -1.8 0 0.9 -1.8 0 0.9 -1.8 0 0 0
              "/>
    </keyframe> -->
    <!-- <keyframe>
        <key name="home" qpos="0 0 0.35 1 0 0 0 0 0.9 -1.8 0 0.9 -1.8 0 0.9 -1.8 0 0.9 -1.8 0 0 0" 
        ctrl="0 0.9 -1.8 0 0.9 -1.8 0 0.9 -1.8 0 0.9 -1.8"/>
    </keyframe> -->
</mujoco>
